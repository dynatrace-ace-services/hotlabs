{"version":13,"variables":[],"tiles":{"3":{"type":"markdown","title":"","content":"---"},"4":{"type":"markdown","title":"","content":"## Breakdown of cost across teams "},"6":{"type":"data","title":"","query":"fetch bizevents\n| filter event.type == \"instance.spend\" and total_hourly_cost != 0\n\n| lookup [\nfetch dt.entity.host\n| fields id,entity.name,entity.type,tags,osVersion\n| expand tags\n| filter contains(tags,\"dt.owner\")\n| parse tags, \"\"\"'[Environment]dt.owner:'LD:owner\"\"\"\n\n], sourceField:dt.entity.host,lookupField:id,prefix:\"lup.host.\"\n\n| fieldsRename lup.host.owner, owner\n| fieldsAdd team = if(isNotNull(owner),owner,else:\"Unallocated costs\")\n| summarize {`USD spent by team` = sum(total_hourly_cost)}, by:{team, bin(timestamp,1m)}\n| limit 20000","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"areaChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"team","categoryAxisLabel":"team","valueAxis":"USD spent by team","valueAxisLabel":"USD spent by team"},"fieldMapping":{"timestamp":"bin(timestamp, 1m)","leftAxisValues":["USD spent by team"],"leftAxisDimensions":["team"],"fields":[],"values":[]}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"team"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{}}}},"8":{"type":"data","title":"$ amount spent","query":"fetch bizevents\n| filter event.type == \"instance.spend\" and total_hourly_cost != 0\n\n| lookup [\nfetch dt.entity.host\n| fields id,entity.name,entity.type,tags,osVersion\n| expand tags\n| filter contains(tags,\"dt.owner\")\n| parse tags, \"\"\"'[Environment]dt.owner:'LD:owner\"\"\"\n\n], sourceField:dt.entity.host,lookupField:id,prefix:\"lup.host.\"\n\n| fieldsRename lup.host.owner, owner\n| fieldsAdd team = if(isNotNull(owner),owner,else:\"Unallocated costs\")\n| summarize {`USD spent by team` = sum(total_hourly_cost),  `number of instances` = count()}, by:{team}\n| limit 20000\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"table","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"team","valueAxis":"USD spent by team","categoryAxisLabel":"team","valueAxisLabel":"USD spent by team"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"team"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{"[\"team\"]":195,"[\"USD spent by team\"]":188}},"unitsOverrides":[{"identifier":"USD spent by team","unitCategory":"currency","baseUnit":"usd","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1703067649055}]}},"10":{"type":"data","title":"Spent distribution across teams","query":"fetch bizevents\n| filter event.type == \"instance.spend\" and total_hourly_cost != 0\n\n| lookup [\nfetch dt.entity.host\n| fields id,entity.name,entity.type,tags,osVersion\n| expand tags\n| filter contains(tags,\"dt.owner\")\n| parse tags, \"\"\"'[Environment]dt.owner:'LD:owner\"\"\"\n], sourceField:dt.entity.host,lookupField:id,prefix:\"lup.host.\"\n\n| fieldsRename lup.host.owner, owner\n| fieldsAdd team = if(isNotNull(owner),owner,else:\"Unallocated costs\")\n| summarize {`USD spent by team` = sum(total_hourly_cost),  `number of instances` = count()}, by:{team}\n| limit 20000\n","davis":{"enabled":false,"davisVisualization":{"isAvailable":true}},"visualization":"pieChart","visualizationSettings":{"thresholds":[],"chartSettings":{"gapPolicy":"connect","circleChartSettings":{"groupingThresholdType":"relative","groupingThresholdValue":0,"valueType":"relative"},"categoryOverrides":{},"categoricalBarChartSettings":{"categoryAxis":"team","valueAxis":"USD spent by team","categoryAxisLabel":"team","valueAxisLabel":"USD spent by team"}},"singleValue":{"showLabel":true,"label":"","prefixIcon":"","autoscale":true,"alignment":"center","recordField":"team"},"table":{"rowDensity":"condensed","enableSparklines":false,"hiddenColumns":[],"lineWrapIds":[],"columnWidths":{"[\"team\"]":195,"[\"USD spent by team\"]":280}},"unitsOverrides":[{"identifier":"USD spent by team","unitCategory":"currency","baseUnit":"usd","displayUnit":null,"decimals":2,"suffix":"","delimiter":false,"added":1703067649055}]}}},"layouts":{"3":{"x":0,"y":16,"w":24,"h":1},"4":{"x":0,"y":0,"w":23,"h":1},"6":{"x":7,"y":1,"w":17,"h":9},"8":{"x":0,"y":10,"w":24,"h":6},"10":{"x":0,"y":1,"w":7,"h":9}}}